# HTTPS协议

## HTTP协议存在的问题

HTTP协议在进行数据传输时，使用明文的方式发送数据，会存在一定的安全隐患

## 什么是HTTPS

HTTPS = HTTP + 加密 + 证书机制

### 对称加密

- 对通信数据进行加密
- 对称加密在加密解密过程中使用同一个秘钥
- 性能更好
- 每次通信秘钥会随机生成

### 非对称加密

- 不能保证客户端与服务端同时生成一个相同的秘钥，所以生成的随机秘钥要被传输，对秘钥进行加密
- 客户端通过公钥来加密，服务端利用私钥来解密
- 性能相对差些

### 证书机制

- 一个服务端会对应多个客户端，所以应该有服务端生成秘钥，发送公钥到客户端建立连接
- 发送公钥到客户端的过程也会有安全问题
- 把公钥放入一个证书中，该证书包含服务端的信息，比如颁发者、域名、有效期，为了保证证书是可信的，需要由一个可信的第三方来对证书进行签名。这个第三方一般是证书的颁发机构，也称CA


## HTTP/3

### HTTP1.1与HTTP2存在的问题？

- 在客户端与服务端通信出现丢包时，会阻塞TCP的通信
- HTTP2中，采用二进制帧进行多路复用，一般只有一个TCP连接进行传输，在丢包或者网络问题时，后面的数据都会被阻塞
- HTTP1.1中，可以开启多个TCP连接，任何一个TCP出现问题都不会影响其他的TCP

### HTTP/3的解决方式？

- 底层依赖由TCP改为UDP
- UDP传输时不需要建立连接，可以同时发送多个数据包，效率很高
- 缺点是没有确认机制来保证对方一定能收到数据

## 总结

| 协议版本 | 解决的核心问题           | 解决方式                               |
| -------- | ------------------------ | -------------------------------------- |
| 0.9      | HTML 文件传输            | 确立了客户端请求、服务端响应的通信流程 |
| 1.0      | 不同类型文件传输         | 设立头部字段                           |
| 1.1      | 创建/断开 TCP 连接开销大 | 建立长连接进行复用                     |
| 2        | 并发数有限               | 二进制分帧                             |
| 3        | TCP 丢包阻塞             | 采用 UDP 协议                          |